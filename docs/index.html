<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Liga AI Predictor ⚽</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .match-card { transition: transform 0.2s; border: none; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .match-card:hover { transform: translateY(-5px); }
        .bg-win { background-color: #d4edda; border-left: 5px solid #28a745; }
        .bg-lose { background-color: #f8d7da; border-left: 5px solid #dc3545; }
        .bg-safe { background-color: #fff3cd; border-left: 5px solid #ffc107; }
        .bg-neutral { background-color: #ffffff; border-left: 5px solid #6c757d; }
        .team-name { font-weight: 700; font-size: 1.1rem; }
        .rec-badge { font-size: 0.9rem; font-weight: bold; }
    </style>
</head>
<body>

<div class="container py-5">
    <header class="text-center mb-5">
        <h1 class="display-4 fw-bold text-primary">⚽ La Liga AI Predictor</h1>
        <p class="lead text-muted">Powered by XGBoost & Python</p>
        <p id="last-update" class="small text-secondary"></p>
    </header>

    <div id="matches-container" class="row g-4">
        <div class="col-12 text-center">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-2">Wczytuję predykcje...</p>
        </div>
    </div>
</div>

<script>
    const JSON_URL = 'matches.json';

    async function loadMatches() {
        try {
            const response = await fetch(JSON_URL + '?t=' + new Date().getTime());
            if (!response.ok) throw new Error("Błąd wczytywania danych");
            
            const matches = await response.json();
            const container = document.getElementById('matches-container');
            container.innerHTML = '';

            if (matches.length === 0) {
                container.innerHTML = '<div class="col-12 text-center"><h3>Brak nadchodzących meczów.</h3></div>';
                return;
            }

            matches.forEach(match => {
                let cardClass = 'bg-neutral';
                let badgeClass = 'bg-secondary';
                
                if (match.class === 'win') { cardClass = 'bg-win'; badgeClass = 'bg-success'; }
                if (match.class === 'lose') { cardClass = 'bg-lose'; badgeClass = 'bg-danger'; }
                if (match.class === 'safe') { cardClass = 'bg-safe'; badgeClass = 'bg-warning text-dark'; }

                const html = `
                <div class="col-md-6 col-lg-4">
                    <div class="card match-card ${cardClass} h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="badge ${badgeClass} rec-badge">Typ: ${match.rec}</span>
                            </div>
                            <div class="row text-center align-items-center mb-3">
                                <div class="col-5"><div class="team-name">${match.home}</div></div>
                                <div class="col-2 fw-bold text-muted">VS</div>
                                <div class="col-5"><div class="team-name">${match.away}</div></div>
                            </div>
                            <div class="progress-stats">
                                <div class="d-flex justify-content-between small text-muted mb-1">
                                    <span>Home: ${match.p_home}%</span>
                                    <span>Away: ${match.p_away}%</span>
                                </div>
                                <div class="progress" style="height: 10px;">
                                    <div class="progress-bar bg-success" style="width: ${match.p_home}%"></div>
                                    <div class="progress-bar bg-warning" style="width: ${match.p_draw}%"></div>
                                    <div class="progress-bar bg-danger" style="width: ${match.p_away}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
                container.innerHTML += html;
            });
            document.getElementById('last-update').innerText = "Ostatnia aktualizacja: " + new Date().toLocaleString();
        } catch (error) {
            console.error(error);
            document.getElementById('matches-container').innerHTML = '<h3 class="text-danger text-center">Błąd wczytywania danych.</h3>';
        }
    }
    loadMatches();
</script>
</body>
</html>
